<% if (locals.data_last) { %>
  <div class="alert alert-primary d-flex align-items-center justify-content-between shadow-sm rounded-3" role="alert">
    <div>
      <span class="fw-bold me-2">ðŸ•’ Last Visit:</span>
      <span class="text-dark small fst-italic"><%= locals.data_last %></span>
    </div>
  </div>
<% } %>


<div class="table-responsive shadow rounded-3">
  <div class="container my-3">
  <form action="/search" method="POST" class="d-flex justify-content-center mb-3">
    <input
      type="text"
      name="search"
      class="form-control w-50 me-2"
      placeholder="Search products by name..."
      required
    />
    <button type="submit" class="btn btn-outline-success">Search</button>
  </form>
</div>
  <table class="table table-bordered table-striped table-hover align-middle mb-0">
    <!-- neutral gray header -->
    <thead class="table-secondary text-dark text-center">
      <tr>
        <th scope="col" class="py-3">ID</th>
        <th scope="col" class="py-3">Name</th>
        <th scope="col" class="py-3">Description</th>
        <th scope="col" class="py-3">Price</th>
        <th scope="col" class="py-3">Image</th>
        <th scope="col" class="py-3">Actions</th>
      </tr>
    </thead>
    <tbody class="text-center">
      <% data.forEach(product => { %>
        <tr>
          <td class="fw-semibold text-secondary"><%= product._id %></td>
          <td class="fw-bold"><%= product._name %></td>
          <td class="text-muted"><%= product._desc %></td>
          <td class="text-success fw-bold">
            $<%= Number(product._prise).toFixed(2) %>
          </td>
          <td>
            <img
              src="<%= product._imageUrl %>"
              alt="Image of <%= product._name %>"
              class="img-thumbnail rounded-3 border-0 shadow-sm"
              style="width: 90px; height: 90px; object-fit: cover;"
            />
          </td>
          <td>
            <div class="d-flex justify-content-center gap-2">
              <a href="/update/<%= product._id %>" class="btn btn-warning btn-sm">
                Update
              </a>
              <a href="/delete/<%= product._id %>" class="btn btn-danger btn-sm">
                Delete
              </a>
            </div>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</div>
